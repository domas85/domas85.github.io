import{r as o,R as I,j as l}from"./chunk-AtVOVOFb.js";import{y as S}from"./chunk-DfQjZqmU.js";import{n as P}from"./chunk-Cs0F-WwC.js";const E=e=>{const t="ontouchstart"in window;(window.matchMedia("(max-width: 1024px)").matches||t)&&e.requestFullscreen()},f=o.createContext({onInitPlayer:()=>{},status:"initial"}),F="https://www.youtube-nocookie.com",L="https://www.youtube.com",x="https://img.youtube.com",j=e=>{if(e)try{const t=new URL(e);return t.pathname==="/embed"?void 0:t.hostname==="youtu.be"?t.pathname.slice(1):t.searchParams.get("v")||t.pathname.split("/").pop()}catch{return e}},T=(e,t)=>{var n,r;const c=j(e.url),i=new URL(t);if(c)i.pathname=`/embed/${c}`;else if(e.url)try{const s=new URL(e.url);i.pathname=s.pathname,i.search=s.search}catch{}const d=Object.keys(e),a={};a.autoplay="1";for(const s of d)if(e[s]!==void 0)switch(s){case"autoplay":e.autoplay&&e.muted===void 0&&(a.mute="1");break;case"muted":a.mute=e.muted?"1":"0";break;case"showControls":a.controls=e.showControls?"1":"0";break;case"showRelatedVideos":a.rel=e.showRelatedVideos?"1":"0";break;case"keyboard":a.keyboard=e.keyboard?"1":"0";break;case"loop":a.loop=e.loop?"1":"0",e.loop&&(e.playlist??"").trim()===""&&(a.playlist=c);break;case"inline":a.playsinline=e.inline?"1":"0";break;case"allowFullscreen":a.fs=e.allowFullscreen?"1":"0";break;case"captionLanguage":a.cc_lang_pref=e.captionLanguage;break;case"showCaptions":a.cc_load_policy=e.showCaptions?"1":"0";break;case"showAnnotations":a.iv_load_policy=e.showAnnotations?"1":"3";break;case"startTime":a.start=(n=e.startTime)==null?void 0:n.toString();break;case"endTime":a.end=(r=e.endTime)==null?void 0:r.toString();break;case"disableKeyboard":a.disablekb=e.disableKeyboard?"1":"0";break;case"language":a.hl=e.language;break;case"listId":a.list=e.listId;break;case"listType":a.listType=e.listType;break;case"color":a.color=e.color;break;case"origin":a.origin=e.origin;break;case"referrer":a.widget_referrer=e.referrer;break;case"playlist":a.playlist=e.playlist;break;case"enablejsapi":a.enablejsapi=e.enablejsapi?"1":"0";break}return Object.entries(a).forEach(([s,u])=>{u!==void 0&&i.searchParams.append(s,u.toString())}),i.toString()},A=e=>{const t=document.createElement("link");t.rel="preconnect",t.href=e,t.crossOrigin="true",document.head.appendChild(t)};let C=!1;const V=e=>{if(!(C||window.matchMedia("(hover: none)").matches)){try{const t=new URL(e);A(t.origin)}catch{}A(x),C=!0}},N=e=>new URL(`${x}/vi/${e}/maxresdefault.jpg`),_=()=>l.jsx("div",{className:"flex w-full h-full items-center justify-center text-lg",children:'Open the "Settings" panel and paste a video URL, e.g. https://youtube.com/watch?v=dQw4w9WgXcQ'}),O=({title:e,status:t,loading:n,videoUrl:r,previewImageUrl:c,autoplay:i,inline:d,renderer:a,showPreview:s,onStatusChange:u,onPreviewImageUrlChange:p})=>{const[y,m]=o.useState(0),w=o.useRef(null);return o.useEffect(()=>{i&&a!=="canvas"&&t==="initial"&&u("loading")},[i,t,a,u]),o.useEffect(()=>{a!=="canvas"&&V(r)},[a,r]),o.useEffect(()=>{const h=j(r);if(!h||!s){p(void 0);return}c||p(N(h))},[p,s,r,c]),a==="canvas"||t==="initial"?null:l.jsx("iframe",{ref:w,title:e,src:r,loading:n,allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,style:{position:"absolute",width:"100%",height:"100%",opacity:y,transition:"opacity 1s",border:"none"},onLoad:()=>{u("ready"),m(1),!d&&!i&&w.current&&E(w.current)}})},$=o.forwardRef(({url:e,loading:t="lazy",autoplay:n,showPreview:r,showAnnotations:c,showCaptions:i,showControls:d,allowFullscreen:a,keyboard:s,children:u,privacyEnhancedMode:p,inline:y=!1,...m},w)=>{const[h,g]=o.useState("initial"),[b,R]=o.useState(),{renderer:k}=o.useContext(I),U=p??!0?F:L,v=T({...m,inline:y,url:e,keyboard:s,showAnnotations:c,showCaptions:i,allowFullscreen:a,showControls:d,autoplay:n,enablejsapi:!1},U);return l.jsx(f.Provider,{value:{status:h,previewImageUrl:b,onInitPlayer(){k!=="canvas"&&g("loading")}},children:l.jsx("div",{...m,ref:w,children:v?l.jsxs(l.Fragment,{children:[u,l.jsx(O,{title:m.title,autoplay:n,videoUrl:v,previewImageUrl:b,loading:t,inline:y,showPreview:r,renderer:k,status:h,onStatusChange:g,onPreviewImageUrlChange:R})]}):l.jsx(_,{})})})});$.displayName="YouTube";const K="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkOAMAANIAzr59FiYAAAAASUVORK5CYII=",M=o.forwardRef(({src:e,...t},n)=>{const r=o.useContext(f);return l.jsx(S,{...t,src:String(r.previewImageUrl??e??K),ref:n})});M.displayName="VimeoPreviewImage";function Q(){return new Promise(e=>{setTimeout(e,100),requestAnimationFrame(()=>{setTimeout(e,0)})})}const Y=o.forwardRef((e,t)=>{const n=o.useContext(f),r=o.useCallback(async()=>{await Q(),n.onInitPlayer()},[n]);if(n.status==="initial")return l.jsx(P,{...e,onClick:r,ref:t})});Y.displayName="VimeoPlayButton";const B=o.forwardRef((e,t)=>{if(o.useContext(f).status==="loading")return l.jsx("div",{...e,ref:t})});B.displayName="VimeoSpinner";export{$,Y as f,B as m,M as s};
